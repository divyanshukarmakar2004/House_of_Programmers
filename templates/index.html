{% extends "base.html" %}

{% block title %}GrowMate - Crop Yield Prediction{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <!-- Header -->
        <div class="text-center mb-5">
            <h1 class="display-4 text-success">
                <i class="fas fa-seedling me-3"></i>GrowMate
            </h1>
            <p class="lead">Predict crop yield using advanced machine learning</p>
            <hr class="my-4">
        </div>

        <!-- Prediction Form -->
        <div class="card shadow-lg">
            <div class="card-header bg-success text-white">
                <h3 class="card-title mb-0">
                    <i class="fas fa-calculator me-2"></i>Crop Yield Prediction
                </h3>
            </div>
            <div class="card-body">
                <form id="predictionForm" method="POST" action="{{ url_for('predict_form') }}">
                    <div class="row">
                        <!-- Crop Information -->
                        <div class="col-md-6 mb-3">
                            <label for="crop_type" class="form-label">
                                <i class="fas fa-leaf me-1"></i>Crop Type *
                            </label>
                            <select class="form-select" id="crop_type" name="crop_type" required>
                                <option value="">Select crop type</option>
                                <option value="Barley">Barley</option>
                                <option value="Corn">Corn</option>
                                <option value="Cotton">Cotton</option>
                                <option value="Potato">Potato</option>
                                <option value="Rice">Rice</option>
                                <option value="Soybean">Soybean</option>
                                <option value="Sugarcane">Sugarcane</option>
                                <option value="Sunflower">Sunflower</option>
                                <option value="Tomato">Tomato</option>
                                <option value="Wheat">Wheat</option>
                            </select>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="soil_type" class="form-label">
                                <i class="fas fa-mountain me-1"></i>Soil Type *
                            </label>
                            <select class="form-select" id="soil_type" name="soil_type" required>
                                <option value="">Select soil type</option>
                                <option value="Clay">Clay</option>
                                <option value="Loamy">Loamy</option>
                                <option value="Peaty">Peaty</option>
                                <option value="Sandy">Sandy</option>
                                <option value="Saline">Saline</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Soil Properties -->
                        <div class="col-md-6 mb-3">
                            <label for="soil_ph" class="form-label">
                                <i class="fas fa-flask me-1"></i>Soil pH (4.0-9.0) *
                            </label>
                            <input type="number" class="form-control" id="soil_ph" name="soil_ph" 
                                   min="4.0" max="9.0" step="0.1" required>
                            <div class="form-text">Range: 4.0 to 9.0</div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label for="soil_quality" class="form-label">
                                <i class="fas fa-star me-1"></i>Soil Quality (0-100) *
                            </label>
                            <input type="number" class="form-control" id="soil_quality" name="soil_quality" 
                                   min="0" max="100" step="1" required>
                            <div class="form-text">Range: 0 to 100</div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Weather Conditions -->
                        <div class="col-md-4 mb-3">
                            <label for="temperature" class="form-label">
                                <i class="fas fa-thermometer-half me-1"></i>Temperature (°C) *
                            </label>
                            <input type="number" class="form-control" id="temperature" name="temperature" 
                                   min="0" max="50" step="0.1" required>
                            <div class="form-text">Range: 0 to 50°C</div>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="humidity" class="form-label">
                                <i class="fas fa-tint me-1"></i>Humidity (%) *
                            </label>
                            <input type="number" class="form-control" id="humidity" name="humidity" 
                                   min="0" max="100" step="0.1" required>
                            <div class="form-text">Range: 0 to 100%</div>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="wind_speed" class="form-label">
                                <i class="fas fa-wind me-1"></i>Wind Speed (km/h) *
                            </label>
                            <input type="number" class="form-control" id="wind_speed" name="wind_speed" 
                                   min="0" max="50" step="0.1" required>
                            <div class="form-text">Range: 0 to 50 km/h</div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Nutrient Content -->
                        <div class="col-md-4 mb-3">
                            <label for="n" class="form-label">
                                <i class="fas fa-atom me-1"></i>Nitrogen (N) *
                            </label>
                            <input type="number" class="form-control" id="n" name="n" 
                                   min="0" max="200" step="0.1" required>
                            <div class="form-text">Range: 0 to 200</div>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="p" class="form-label">
                                <i class="fas fa-atom me-1"></i>Phosphorus (P) *
                            </label>
                            <input type="number" class="form-control" id="p" name="p" 
                                   min="0" max="200" step="0.1" required>
                            <div class="form-text">Range: 0 to 200</div>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="k" class="form-label">
                                <i class="fas fa-atom me-1"></i>Potassium (K) *
                            </label>
                            <input type="number" class="form-control" id="k" name="k" 
                                   min="0" max="200" step="0.1" required>
                            <div class="form-text">Range: 0 to 200</div>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Rainfall -->
                        <div class="col-md-12 mb-3">
                            <label for="avg_rainfall" class="form-label">
                                <i class="fas fa-cloud-rain me-1"></i>Average Seasonal Rainfall (mm) *
                            </label>
                            <input type="number" class="form-control" id="avg_rainfall" name="avg_rainfall" 
                                   min="0" max="10000" step="1" required>
                            <div class="form-text">Range: 0 to 10,000 mm</div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="text-center">
                        <button type="submit" class="btn btn-success btn-lg px-5">
                            <i class="fas fa-calculator me-2"></i>Predict Yield
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Features Section -->
        <div class="row mt-5">
            <div class="col-md-4 text-center mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fas fa-brain fa-3x text-success mb-3"></i>
                        <h5 class="card-title">Machine Learning</h5>
                        <p class="card-text">Advanced ML models trained on agricultural data for accurate predictions.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 text-center mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fas fa-chart-line fa-3x text-success mb-3"></i>
                        <h5 class="card-title">Real-time Analysis</h5>
                        <p class="card-text">Get instant yield predictions based on current environmental conditions.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4 text-center mb-4">
                <div class="card h-100">
                    <div class="card-body">
                        <i class="fas fa-mobile-alt fa-3x text-success mb-3"></i>
                        <h5 class="card-title">Easy to Use</h5>
                        <p class="card-text">Simple web interface accessible from any device, anywhere.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Form validation and enhancement
    document.getElementById('predictionForm').addEventListener('submit', function(e) {
        // Add loading state
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Predicting...';
        submitBtn.disabled = true;
        
        // Re-enable after 3 seconds (in case of error)
        setTimeout(() => {
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }, 3000);
    });
</script>
{% endblock %}
